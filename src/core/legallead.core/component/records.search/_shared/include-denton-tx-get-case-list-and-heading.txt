/*
	get denton case style
 */
 function customTrim(data) {
	const colon = ':';
	if( data.indexOf(colon) < 0 ) return data;
	const arr = [];
	const items = data.split(colon);
	for (let i = 0; i < items.length; i++) {
		let needsColon = i % 2 == 0;
		let datum = items[i].replace(/\s/g, ' ').trim() + (needsColon ? colon : "");
		arr.push(datum);
	}
	return arr.join(" ");
 }
 
 function getSearchHeading() {
	const parmid = "SearchParamList";
	let td = document.getElementById(parmid);
	let tb = td.closest('table');
	let search = customTrim(td.innerText);
	let rc = customTrim(tb.rows[0].innerText);
	return JSON.stringify( { "rowCount": rc, "searchBy": search } );
 }
 
 function getSearchRecordDetails() {
	 
	linklist = document.getElementsByTagName("a");
	links = [];
	for(let n = 0; n < linklist.length; n++) {
		let lnk = linklist[n];
		let attr = lnk.getAttribute("href");
		if(undefined == attr || null == attr || attr.indexOf("CaseDetail.aspx?") < 0 ) continue;
		let caseNumber = lnk.innerText;
		let tr1 = lnk.closest('tr');
		let caseStyle = tr1.cells[1].innerText;
		let td2 = tr1.cells[2].getElementsByTagName("div");
		let dteFiled = td2[0].innerText;
		let court = td2[1].innerText;
		let jdo = td2[2].innerText;
		links.push({
		 "caseNumber": caseNumber,
		 "caseStyle": caseStyle,
		 "dateFiled": dteFiled,
		 "court": court,
		 "officer": jdo
		});
	}
	return JSON.stringify( links );
 }
 
 function getDocumentSummary() {
	var heading = getSearchHeading();
	var records = getSearchRecordDetails();
	return JSON.stringify( { "heading": heading, "records" : records });
 }
 
 getDocumentSummary();