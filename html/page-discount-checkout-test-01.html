<html><head>
		<script type="text/javascript">
                         try { 
                         CefSharp.BindObjectAsync("jsHandler", "jsHandler"); 
                              } catch {} 


		</script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">
		<title>legallead.ui: account</title>
		
		<!-- googleapis : fonts -->
		<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap" rel="stylesheet">
		
		<!-- popper -->
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
		
		<!-- bootstrap -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
		
		<!-- font awesome -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/fontawesome.min.css" integrity="sha384-BY+fdrpOd3gfeRvTSMT+VUZmA728cfF9Z2G42xpaRkUGu2i3DyzpTURDo5A6CaLK" crossorigin="anonymous">
		
		<!-- jquery -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.20.0/dist/jquery.validate.min.js"></script>
		
		<!-- common styles -->
		<link rel="stylesheet" name="cover-css" href="https://getbootstrap.com/docs/4.0/examples/cover/cover.css">
		
		<!-- common styles -->
		<style name="base-css">
                    /* 
                    * Forms 
                    */ 
                         .form-control:focus { 
                         background-color: #444; 
                         color: rgb(240, 240, 240) 
                         } 
                         .form-control { 
                         background-color: transparent; 
                         border-color: #555; 
                         color: ghostwhite; 
                         } 
                         .form-control.error { 
                         border-color: red; 
                         } 
                         label.error { 
                         color: red; 
                         font-size: small; 
                         } 
                         div.help-text { 
                         font-size: small; 
                         } 
                    /* 
                    * Header 
                    */ 
                         div[name="header"] { 
                         height: 50px; 
                         border-bottom: #444 solid 1px; 
                         margin-top: 5px; 
                         } 
                    /* 
                    * Loader 
                    */ 
                         div[name="loader"] { 
                         margin-top: 20px; 
                         margin-bottom: 20px; 
                         border: 16px solid #cdcdb1; /* Light grey */ 
                         border-top: 16px solid #9c9c63; /* Brown-ish */ 
                         border-radius: 50%; 
                         width: 120px; 
                         height: 120px; 
                         animation: spin 3s linear infinite; 
                         } 
                         @keyframes spin { 
                              0% { transform: rotate(0deg); } 
                              100% { transform: rotate(360deg); } 
                         } 
                    /* 
                    * Card 
                    */ 
                         .card { 
                         background-color: transparent; 
                         border-color: #444; 
                         color: #fff; 
                         } 
                         .card .card-body .card-title { 
                         border-bottom: #444 solid 1px; 
                         padding-bottom: 5px; 
                         } 
                         .card .card-footer { 
                         border-top: #555 solid 1px; 
                         } 
                         @media screen and (max-width: 500px) { 
                              .card { 
                              width: 300px; 
                              margin-left: 40px; 
                              } 
                         } 
                    /* 
                    * Modal 
                    */ 
                         div.modal-content { 
                         background-color: lightgray; 
                         color: rgb(240, 240, 240); 
                         } 
                    /* 
                    * Data Tables 
                    */ 
                    table[name='search-dt-table'], 
                         table[automationId='search-preview-table'] { 
                         font-size: 14px; 
                         border: 1px solid #444; 
                         width: 100%; 
                         margin-left: 5px; 
                         margin-right: 10px; 
                         } 
                    table[name='search-dt-table'] tbody, 
                    table[name='search-dt-table'] td, 
                    table[name='search-dt-table'] tfoot, 
                    table[name='search-dt-table'] th, 
                    table[name='search-dt-table'] thead, 
                    table[name='search-dt-table'] tr, 
                    table[automationId='search-preview-table'] tbody, 
                    table[automationId='search-preview-table'] td, 
                    table[automationId='search-preview-table'] tfoot, 
                    table[automationId='search-preview-table'] th, 
                    table[automationId='search-preview-table'] thead, 
                         table[automationId='search-preview-table'] tr { 
                         border: 1px solid #444; 
                         } 
                    table[name='search-dt-table'] td, 
                         table[automationId='search-preview-table'] td { 
                         padding-left: 4px; 
                         padding-right: 4px; 
                         } 
                    table[name='search-dt-table'] thead tr, 
                         table[automationId='search-preview-table'] thead tr { 
                         background-color: rgba(255, 255, 255, .25); 
                         } 
                    table[name='search-dt-table'] tfoot tr td, 
                         table[automationId='search-preview-table'] tfoot tr td { 
                         border-top-style: double; 
                         border-right-style: none; 
                         border-bottom-style: none; 
                         border-left-style: none; 
                         } 
                    table[name='search-dt-table'] tfoot, 
                         table[automationId='search-preview-table'] tfoot { 
                         margin-top: 10px; 
                         } 
                         tr[data-position] { 
                         cursor: pointer; 
                         } 
                         tr[data-position]:hover { 
                         background-color: rgba(255, 255, 255, .25); 
                         } 
                         tr[data-position='odd'] { 
                         background-color: rgba(125, 125, 125, .25); 
                         } 
                         tr[data-position] a[name='link-show-details']:hover { 
                         color: #0a58ca; 
                         } 
                         #cbo-subcontent-history-pager { 
                         background-color: transparent; 
                         border-color: #555; 
                         color: ghostwhite; 
                         } 


		</style>
		<style name="subcontent-css">
                         div.subcontent { 
                         width: 50%; 
                         min-width: 400px; 
                         max-width: 1200px; 
                         margin-bottom: 20px; 
                         display: none; 
                         } 
                         div.subcontent.active { 
                         display: block; 
                         } 
                         div[name="subcontent-home-bullet-list"] { 
                         width: 50%; 
                         margin-left: 35%; 
                         text-align: left; 
                         justify-content: left; 
                         } 
                         div[name="main-content"] { 
                         width: 70%; 
                         min-width: 800px; 
                         max-width: 1200px; 
                         } 
                         div[name="main-content"] div.card { 
                         height: 95%; 
                         min-height: 560px; 
                         } 
                    div[name="subcontent-home"], 
                    div[name="subcontent-profile"], 
                    div[name="subcontent-permissions"], 
                         div[name="subcontent-password"] { 
                         text-align: left; 
                         justify-content: left; 
                         margin-bottom: 20px; 
                         margin-left: 20px; 
                         } 
                    div[name="subcontent-permissions"] .form-check-input, 
                    div[name="subcontent-permissions"] .list-group, 
                         div[name="subcontent-permissions"] .list-group-item { 
                         background-color: transparent; 
                         border-color: #555; 
                         color: ghostwhite; 
                         } 
                         #dv-subcontent-permissions-container { 
                         width: 85%; 
                         margin-left: 25px; 
                         } 


		</style>
	</head>
	<body class="text-center">
		
		<!-- Reauthorize Modal -->  		 		 		 		 		 		 		 		 		 		 		 		 		
		<!-- Reauthorize: trigger modal -->
		<button id="btn-account-authorize-show" type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#account-authorize-modal">
			Launch static backdrop modal
		</button>
		
		<!-- Reauthorize: Modal Content -->
		<div class="modal fade" id="account-authorize-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="account-authorize-label" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5 text-muted" id="account-authorize-label">Session Expired</h1>
						<button id="account-authorize-x-close" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body text-dark">
						<table>
							<thead>
								<tr>
									<td>
										<span class="text-dark">Your session has timed out.</span>
									</td>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<form id="form-re-authorize" name="form-re-authorize">
											<span type="text" style="display:none" id="spn-user-session-status">-unset-</span>
											<div class="mb-3">
												<label for="form-re-authorize-username" class="form-label text-dark">User Name / Email:</label>
												<input type="text" readonly="readonly" class="form-control" id="form-re-authorize-username" name="username" aria-describedby="form-re-authorize-username-help">
												<div id="form-re-authorize-username-help" class="text-secondary help-text">
													Provide user-name or email address.
												</div>
											</div>
											<div class="mb-3">
												<label for="form-re-authorize-password" class="form-label text-dark">Password</label>
												<input type="password" class="form-control" name="login-password" id="form-re-authorize-password">
												<div id="form-re-authorize-password-help" class="text-secondary help-text" aria-describedby="form-re-authorize-password-help">
													Provide password.
												</div>
											</div>
											<button id="form-re-authorize-submit" type="button" class="btn btn-primary">
												<i id="form-re-authorize-icon" class="bi bi-box-arrow-in-right"></i>
												<i id="form-re-authorize-icon-spin" class="bi bi-arrow-clockwise fa fa-spin d-none"></i>
												Sign In</button>
											<div id="form-re-authorize-error-message" class="form-group d-none">
												
												<!-- Error messages -->
											</div>
										</form>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Logout Modal -->  		 		 		 		 		 		 		 		 		 		 		 		 		
		<!-- Button trigger modal -->
		<button id="btn-my-account-logout-show" type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#my-account-logout-modal">
			Launch static backdrop modal
		</button>
		
		<!-- Modal -->
		<div class="modal fade" id="my-account-logout-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="my-account-logout-label" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5 text-muted" id="my-account-logout-label">Logout</h1>
						<button id="my-account-logout-x-close" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body text-dark">
						Are you sure you want to log out?
					</div>
					<div class="modal-footer">
						<button id="my-account-logout-bttn-close" type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
						<button id="my-account-logout-bttn" type="button" class="btn btn-primary" onclick="verifyAndPost( 'user', 'logout')">Confirm</button>
					</div>
				</div>
			</div>
		</div>
		<div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
			<header class="masthead mb-auto" style="border-bottom: #444 solid 1px; padding-bottom: 2px">
				<div class="inner">
					<h3 class="masthead-brand">
						<i class="bi bi-bank2"></i>
						<span>Legal Lead UI</span>
					</h3>
					<nav id="masthead-nav-menu" class="nav nav-masthead justify-content-center">
						<a name="subcontent-home" class="nav-link" href="javascript:setDisplay('home')">Home</a>
						<a name="subcontent-profile" class="nav-link" href="javascript:setDisplay('profile')">Profile</a>
						<a name="subcontent-permissions" class="nav-link active" href="javascript:setDisplay('permissions')">Permissions</a>
						<div id="account-subcontent-icon" name="subcontent-icon" class="nav-link dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="bi bi-person-fill-check "></i>
							</button>
							<ul class="dropdown-menu">
								<li>
									<a id="account-dropdown-item-user-name" class="dropdown-item" href="#">
										<i class="bi bi-person m-1"></i>
										<span id="account-text-item-user-name">legallead-live</span>
									</a>
								</li>
								<li>
									<a id="account-dropdown-item-user-level" class="dropdown-item" href="#">
										<i class="bi bi-collection m-1"></i>
										<span id="account-text-item-user-level">Guest</span>
									</a>
								</li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li>
									<a id="account-dropdown-item-password" class="dropdown-item" href="javascript:setDisplay('password')">
										<i class="bi bi-key m-1"></i>
										<span id="account-text-item-password">Change Password</span>
									</a>
								</li>
								<li>
									<a id="account-dropdown-item-logout" class="dropdown-item" href="javascript:showLogout()">Logout</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</header>
			<main role="main" class="inner cover">
				<div id="dv-restriction-alert" class="alert alert-primary p-2 m-2 d-none" role="alert">
					<i class="bi bi-exclamation-diamond"></i>
					<span id="span-restriction-alert-message">message</span>
				</div>
				<div id="dv-main-content" name="main-content" style="margin-top: 20px;">
					<div id="dv-subcontent-home" name="subcontent-home" class="subcontent card">
						<div class="card-body">
							<h5 class="card-title">Account Details</h5>
							<div class="row">
								<div class="col-4 text-info text-start">User Name:</div>
								<div class="col-1 text-info"></div>
								<div id="account-user-name" class="col-7 text-secondary text-start">legallead-live</div>
							</div>
							<div class="row">
								<div class="col-4 text-info text-start">Email:</div>
								<div class="col-1 text-info"></div>
								<div id="account-user-email" class="col-7 text-secondary text-start">legallead.live@mail.com</div>
							</div>
							<div class="row">
								<div class="col-4 text-info text-start">Account Date:</div>
								<div class="col-1 text-info"></div>
								<div id="account-create-date" class="col-7 text-secondary text-start">5/14/2024</div>
							</div>
							<div class="row">
								<div class="col-4 text-info text-start">Account Type:</div>
								<div class="col-1 text-info"></div>
								<div id="account-role" class="col-7 text-secondary text-start">Guest</div>
							</div>
							<div id="account-description" class="row">
								<hr class="m-2 w-75">
								<h5>Guest</h5>
								<div>
									<p class="lead">
										Guest Account.
										<br>
										As a Guest you have the following search restrictions.
									</p>
									<ol>
										<li>Searches: A limit of 5 records can returned from any a search.</li>
										<li>Monthly Limit: A maximum of 15 records can be retrieved in a calendar month.</li>
										<li>Annual Limit: A maximum of 50 records can be retrieved in a calendar year.</li>
									</ol>
									<p>
										Data restriction:          Any search result will be masked to remove address and/or case information.
									</p>
									<h6 class="text-secondary">
										The guest account is intended to allow users to test the system prior to purchase.
									</h6>
								</div>
							</div>
						</div>
					</div>
					<div id="dv-subcontent-profile" name="subcontent-profile" class="subcontent card">
						<div id="dv-subcontent-profile-row-00" class="row d-none w-75">
							<div id="dv-subcontent-profile-success" class="alert alert-success d-flex align-items-center" role="alert">
								<div class="row">
									<i class="bi bi-check-circle-fill"></i>
									<span>Your account information has been updated successfully</span>
								</div>
							</div>
						</div>
						<div class="card-body">
							<h5 class="card-title text-start">Account Profile</h5>
							<div class="row">
								<div id="dv-subcontent-profile-row-01" class="mb-3 text-start">
									<label for="cbo-profile-group" class="form-label text-secondary">Section</label>
									<select id="cbo-profile-group" class="form-control" onchange="profileComboBoxChanged()">
										<option value="">Select view</option>
										<option selected="" value="personal">Personal Details</option>
										<option value="address">Addresses</option>
										<option value="phone">Phone Numbers</option>
										<option value="email">Email Addresses</option>
									</select>
								</div>
								<div id="dv-subcontent-profile-row-02" name="dv-subcontent-profile-personal" class="mb-3 text-start">
									<hr>
									<form id="frm-profile-personal" name="frm-user-profile" novalidate="novalidate">
										<div class="row">
											<label for="tbx-profile-first-name" class="form-label text-secondary">First Name</label>
											<input id="tbx-profile-first-name" name="first-name" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-last-name" class="form-label text-secondary">Last Name</label>
											<input id="tbx-profile-last-name" name="last-name" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-company" class="form-label text-secondary">Company</label>
											<input id="tbx-profile-company" name="company-name" class="form-control w-75 m-2" value="">
										</div>
									</form>
								</div>
								<div id="dv-subcontent-profile-row-03" name="dv-subcontent-profile-address" class="mb-3 text-start d-none">
									<hr>
									<form id="frm-profile-address" name="frm-user-profile" novalidate="novalidate">
										<div class="row m-1">
											<label for="tbx-profile-mailing-address" class="form-label text-secondary">Mailing Address</label>
											<textarea rows="4" id="tbx-profile-mailing-address" name="mailing-address" class="form-control"></textarea>
										</div>
										<div class="row m-1">
											<label for="tbx-profile-billing-address" class="form-label text-secondary">Billing Address</label>
											<textarea rows="4" id="tbx-profile-billing-address" name="billing-address" class="form-control"></textarea>
										</div>
									</form>
								</div>
								<div id="dv-subcontent-profile-row-04" name="dv-subcontent-profile-phone" class="mb-3 text-start d-none">
									<hr>
									<form id="frm-profile-phone" name="frm-user-profile" novalidate="novalidate">
										<div class="row">
											<label for="tbx-profile-phone-01" class="form-label text-secondary">Contact</label>
											<input id="tbx-profile-phone-01" name="phone-number" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-phone-02" class="form-label text-secondary">Office</label>
											<input id="tbx-profile-phone-02" name="phone-number" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-phone-03" class="form-label text-secondary">Fax / Other</label>
											<input id="tbx-profile-phone-03" name="phone-number" class="form-control w-75 m-2" value="">
										</div>
									</form>
								</div>
								<div id="dv-subcontent-profile-row-05" name="dv-subcontent-profile-email" class="mb-3 text-start d-none">
									<hr>
									<form id="frm-profile-email" name="frm-user-profile" novalidate="novalidate">
										<div class="row">
											<label for="tbx-profile-email-01" class="form-label text-secondary">Primary</label>
											<input type="email" id="tbx-profile-email-01" name="email-address" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-email-02" class="form-label text-secondary">Business</label>
											<input type="email" id="tbx-profile-email-02" name="email-address" class="form-control w-75 m-2" value="">
										</div>
										<div class="row">
											<label for="tbx-profile-email-03" class="form-label text-secondary">Alternate</label>
											<input type="email" id="tbx-profile-email-03" name="email-address" class="form-control w-75 m-2" value="">
										</div>
									</form>
								</div>
							</div>
						</div>
						<div class="card-footer">
							<div id="frm-profile-error-message" class="d-none">
								
								<!-- Error messages -->
							</div>
							<button id="frm-profile-submit-button" class="btn btn-primary" onclick="profileSubmitButtonClicked()">
								<i id="form-profile-icon" class="bi bi-pencil-square"></i>
								<i id="form-profile-icon-spin" class="bi bi-arrow-clockwise fa fa-spin d-none"></i>Save
							</button>
						</div>
					</div>
					<div id="dv-subcontent-permissions" name="subcontent-permissions" class="subcontent card active">
						<div id="dv-subcontent-permissions-row-00" class="row w-75">
							<div id="dv-subcontent-permissions-success" class="alert alert-success d-flex align-items-center" role="alert" style="">
								<div class="row">
									<i class="bi bi-check-circle-fill"></i>
									<span>Your account information has been updated successfully</span>
								</div>
							</div>
						</div>
						<div class="card-body">
							<h5 class="card-title text-start">Account Permissions</h5>
						</div>
						<div id="dv-subcontent-permissions-container" class="row">
							<div id="dv-subcontent-permissions-row-01" class="mb-3 text-start">
								<label for="cbo-permissions-group" class="form-label text-secondary">Section</label>
								<select id="cbo-permissions-group" class="form-control" onchange="permissionsComboBoxChanged()">
									<option value="">Select view</option>
									<option selected="" value="02">Subscription</option>
									<option value="03">Discounts</option>
								</select>
							</div>
							<div id="dv-subcontent-permissions-row-02" class="mb-3 text-start" style="display: none;">
								<h6 class="form-label text-secondary">Permission Level</h6>
								<ul id="permissions-subscription-group" class="list-group">
									<li class="list-group-item">
										<input class="form-check-input me-1" name="subscription-group" onchange="subscriptionLevelChanged()" type="radio" value="Guest" id="permissions-subscription-guest-radio" checked="checked">
										<label class="form-check-label" for="permissions-subscription-guest-radio">Guest</label>
									</li>
									<li class="list-group-item">
										<input class="form-check-input me-1" name="subscription-group" onchange="subscriptionLevelChanged()" type="radio" value="Silver" id="permissions-subscription-silver-radio">
										<label class="form-check-label" for="permissions-subscription-silver-radio">Silver</label>
									</li>
									<li class="list-group-item">
										<input class="form-check-input me-1" name="subscription-group" onchange="subscriptionLevelChanged()" type="radio" value="Gold" id="permissions-subscription-gold-radio">
										<label class="form-check-label" for="permissions-subscription-gold-radio">Gold</label>
									</li>
									<li class="list-group-item">
										<input class="form-check-input me-1" name="subscription-group" onchange="subscriptionLevelChanged()" type="radio" value="Platinum" id="permissions-subscription-platinum-radio">
										<label class="form-check-label" for="permissions-subscription-platinum-radio">Platinum</label>
									</li>
								</ul>
								<div id="dv-permissions-subscription-description">
									<p class="text-secondary m-2" name="subscription-description" id="subscription-description-guest" style="">
										Guest subscription allows limited access to system function,  											with ability to search records and retrieve sample data.
									</p>
									<p class="text-secondary m-2" name="subscription-description" id="subscription-description-silver" style="display: none;">
										Silver subscription allows user to make inquiries
										<br>
										into the records dataset.<br>
										Records are served at 5 cents per lead.<br>
										Maximum of 1,000 leads available per year.
									</p>
									<p class="text-secondary m-2" name="subscription-description" id="subscription-description-gold" style="display: none;">
										Gold subscription allows user to make inquiries
										<br>
										into the records dataset.<br>
										Records are served at 4 cents per lead.<br>
										Maximum of 10,000 leads available per year.
									</p>
									<p class="text-secondary m-2" name="subscription-description" id="subscription-description-platinum" style="display: none;">
										Platinum subscription allows user to make inquiries
										<br>
										into the records dataset.<br>
										Records are served at 3 cents per lead.<br>
										Maximum of 100,000 leads available per year.
									</p>
								</div>
							</div>
							<div id="dv-subcontent-permissions-row-03" class="mb-3 text-start" style="">
								<h6>State Discounts</h6>
								<ul id="permissions-discounts-states-group" class="list-group">
									<li class="list-group-item">
										<input class="form-check-input me-1" type="checkbox" value="" id="permissions-discounts-tx">
										<label class="form-check-label" for="permissions-discounts-tx">Texas</label>
									</li>
								</ul>
								<h6>County Discounts</h6>
								<ul id="permissions-discounts-counties-group" class="list-group">
									<li class="list-group-item">
										<input class="form-check-input me-1" type="checkbox" value="" id="permissions-discounts-tx-collin">
										<label class="form-check-label" for="permissions-discounts-tx-collin">Texas : Collin</label>
									</li>
									<li class="list-group-item">
										<input class="form-check-input me-1" type="checkbox" value="" id="permissions-discounts-tx-denton">
										<label class="form-check-label" for="permissions-discounts-tx-denton">Texas : Denton</label>
									</li>
									<li class="list-group-item">
										<input class="form-check-input me-1" type="checkbox" value="" id="permissions-discounts-tx-tarrant">
										<label class="form-check-label" for="permissions-discounts-tx-tarrant">Texas : Tarrant</label>
									</li>
								</ul>
							</div>
						</div>
						<div class="card-footer">
							<div id="frm-permissions-error-message" class="d-none"><!-- Error messages --></div>
							<button id="frm-permissions-submit-button" class="btn btn-primary" onclick="changePermissionsButtonClicked()">
								<i id="form-permissions-icon" class="bi bi-pencil-square"></i>
								<i id="form-permissions-icon-spin" class="bi bi-arrow-clockwise fa fa-spin d-none"></i>Save
							</button>
						</div>
					</div>
					<div id="dv-subcontent-password" name="subcontent-password" class="subcontent card">
						<div id="dv-subcontent-password-row-00" class="row d-none w-75">
							<div id="dv-subcontent-password-success" class="alert alert-success d-flex align-items-center" role="alert">
								<div class="row">
									<i class="bi bi-check-circle-fill"></i>
									<span>Your account information has been updated successfully</span>
								</div>
							</div>
						</div>
						<div class="card-body">
							<h5 class="card-title">Change Password</h5>
							<form id="form-change-password" name="form-change-password" novalidate="novalidate">
								<div class="mb-3">
									<label for="account-password-username" class="form-label">User Name:</label>
									<input type="text" class="form-control" id="account-password-username" name="username" maxlength="255" minlength="8" readonly="readonly" value="legallead-live">
								</div>
								<div class="mb-3">
									<label for="account-password-old-password" class="form-label">Old Password</label>
									<input type="password" class="form-control" id="account-password-old-password" name="account-password" maxlength="255" minlength="8" aria-describedby="account-password-old-password-help">
									<div id="account-password-old-password-help" class="text-secondary help-text">
										Provide your current password.
									</div>
								</div>
								<div class="mb-3">
									<label for="account-password-new-password" class="form-label">New Password</label>
									<input type="password" class="form-control" id="account-password-new-password" name="account-password" maxlength="255" minlength="8" aria-describedby="account-password-new-password-help">
									<div id="account-password-new-password-help" class="text-secondary help-text">
										Provide a strong password.
									</div>
								</div>
								<div class="mb-3">
									<label for="account-password-confirmation" class="form-label">Confirm Password</label>
									<input type="password" class="form-control" id="account-password-confirmation" name="account-password" maxlength="255" minlength="8" aria-describedby="account-password-confirmation-help">
									<div id="account-password-confirmation-help" class="text-secondary help-text">
										Confirm password.
									</div>
								</div>
							</form>
						</div>
						<div class="card-footer">
							<div id="frm-change-password-error-message" class="d-none">
								
								<!-- Error messages -->
							</div>
							<button id="frm-change-password-submit-button" class="btn btn-primary" onclick="changePasswordSubmitButtonClicked()">
								<i id="form-change-password-icon" class="bi bi-pencil-square"></i>
								<i id="form-change-password-icon-spin" class="bi bi-arrow-clockwise fa fa-spin d-none"></i>Save
							</button>
						</div>
					</div>
				</div>
			</main>
			<footer class="mastfoot mt-auto">
				<div id="footer-copy" class="float-end">
					<span id="footer-copy-span">(c) 2023, 2024 Legal Lead UI</span>
				</div>
				<div id="footer-reload" class="float-start" style="display:none">
					<a id="footer-reload-link" href="javascript:reloadContent()" class="text-secondary text-decoration-none">Reload</a>
				</div>
			</footer>
		</div>
		<script>
                    const actv = "active"; 
                    const names = [ "home", "profile", "permissions", "password" ]; 
                         function showLogout() { 
                         let bttn = "#btn-my-account-logout-show"; 
                         $( bttn ).click(); 
                         return null; 
                         } 
                         function setDisplay( name ) { 
                              if (names.indexOf( name ) < 0 ) { return; } 
                         setActiveDiv(name); 
                         const themenu = document.getElementById("masthead-nav-menu"); 
                         let thelinks = themenu.getElementsByTagName("a"); 
                              for(let i = 0; i < thelinks.length; i++) { 
                              let a = thelinks[i]; 
                              const aname = a.getAttribute("name"); 
                                   if (null === aname || undefined === aname) { continue; } 
                                   if ( aname.indexOf(name) >= 0 ) { 
                                   a.classList.add(actv); 
                                        } else { 
                                   a.classList.remove(actv); 
                                   } 
                              } 
                         } 
                         function setActiveDiv( name ) { 
                              if (names.indexOf( name ) < 0 ) { return; } 
                         const divnames = [ "dv-subcontent-home", "dv-subcontent-profile", "dv-subcontent-permissions", "dv-subcontent-password" ]; 
                              for(let i = 0; i < divnames.length; i++) { 
                              const d = document.getElementById(divnames[i]); 
                                   if(null === d || undefined === d) { continue; } 
                                   if ( divnames[i].indexOf(name) >= 0 ) { 
                                   d.classList.add(actv); 
                                        } else { 
                                   d.classList.remove(actv); 
                                   } 
                              } 
                         } 
                         function getPageName() { 
                         const defaultName = "home"; 
                         const colon = ":"; 
                         var current_title = $(document).attr('title'); 
                         if ( undefined === current_title || null === current_title || current_title.length === 0) return defaultName; 
                         if (current_title.indexOf(colon) < 0 || current_title.split(colon).length < 2) return defaultName; 
                         var landing = current_title.split(':')[1].trim(); 
                         return landing == "account" ? "myaccount-~0" : "home-~0"; 
                         } 
                         function getDisplay( ) { 
                         const find = "~0"; 
                         let pageName = getPageName(); 
                         const themenu = document.getElementById("masthead-nav-menu"); 
                         let thelinks = themenu.getElementsByTagName("a"); 
                              for (let i = 0; i < thelinks.length; i++) { 
                              let a = thelinks[i]; 
                              const aname = a.getAttribute("name"); 
                                   if( undefined === aname || null === aname ) { continue; } 
                                   if( !a.classList.contains(actv) ) { continue; } 
                              return pageName.replace(find, aname.split("-")[1]); 
                              } 
                         return ""; 
                         } 
                         function reloadContent() { 
                         const jsobj = window.jsHandler; 
                         if ( undefined === jsobj || null === jsobj ) return; 
                         const currentLocation = getDisplay(); 
                         if ( undefined === currentLocation || null === currentLocation || currentLocation.length === 0) return; 
                         const linkName = "#footer-reload-link"; 
                         const headerlinks = "#masthead-nav-menu a[name]"; 
                         const links = [ linkName, headerlinks ]; 
                         const sectionMain = "main"; 
                         const animationInterval = 400; 
                              links.forEach(n => { 
                              $(n).bind('click', false); 
                              $(n).attr('href', 'javascript:void()'); 
                              }) 
                              $(sectionMain).css({opacity: 1.0, visibility: "visible"}).animate({opacity: 0}, animationInterval); 
                         const restoreInterval = animationInterval * 3; 
                         setTimeout( 
                         function() 
                              { 
                              const jsobj = window.jsHandler; 
                              const currentLocation = getDisplay(); 
                              jsobj.reload( currentLocation ); 
                              }, restoreInterval); 
                         } 
                         function profileComboBoxChanged() { 
                         const hidden = "d-none"; 
                         const cboxid = "#cbo-profile-group"; 
                         const find = "~0"; 
                         const dvprefix = "div[name='dv-subcontent-profile-~0']"; 
                         const dvparent = "#dv-subcontent-profile"; 
                         const divnames = [ 
                         dvprefix.replace(find, "personal"), 
                         dvprefix.replace(find, "address"), 
                         dvprefix.replace(find, "phone"), 
                         dvprefix.replace(find, "email")  ]; 
                              for(var i = 0; i < divnames.length; i++) { 
                              var dv = divnames[i]; 
                              $( dv ).addClass(hidden); 
                              } 
                         var current = $(cboxid).val(); 
                              if (null === current || current.length === 0) { 
                              $( dvparent ).find("div.card-footer").hide(); 
                              return; 
                              } 
                         var target = dvprefix.replace(find, current); 
                         $( target ).removeClass(hidden); 
                         $( dvparent ).find("div.card-footer").show(); 
                         } 
                    profileComboBoxChanged() 


		</script>
		
		<!-- script: my-account-form-validation -->
		<script>
                         let permissions_general = { 
                              "change_form": { 
                              "alertTimer" : null, 
                              "button": "#frm-permissions-submit-button", 
                                   "icons": { 
                                   "normal": "#form-permissions-icon", 
                                   "spin": "#form-permissions-icon-spin" 
                                   }, 
                              "error": "#frm-permissions-error-message", 
                                   "setIcon": function( isSpinning ) { 
                                   const dsb = "disabled"; 
                                   const hddn = "d-none"; 
                                   let frm = permissions_general.change_form; 
                                   let icons = [ frm.icons.normal, frm.icons.spin ]; 
                                   var bttn = frm.button; 
                                   let a = isSpinning ? 0 : 1; 
                                   let b = isSpinning ? 1 : 0; 
                                   $( icons[a] ).addClass( hddn ); 
                                   $( icons[b] ).removeClass( hddn ); 
                                        if( isSpinning ) { 
                                        $( bttn ).attr(dsb, dsb); 
                                             } else { 
                                        $( bttn ).removeAttr(dsb); 
                                        } 
                                   }, 
                                   "setStatus": function( message, isActive ) { 
                                   const dsb = "disabled"; 
                                   const hddn = "d-none"; 
                                   const emptymessage = "<!-- Error messages -->" 
                                   let frm = permissions_general.change_form; 
                                   var dverr = frm.error 
                                        if( isActive ) { 
                                        $( dverr ).removeClass(hddn); 
                                        $( dverr ).html(message); 
                                             } else { 
                                        $( dverr ).addClass(hddn); 
                                        $( dverr ).html(emptymessage); 
                                        } 
                                   }, 
                                   "setAlert": function(isActive) { 
                                   const hddn = "d-none"; 
                                   const parentDv = "#dv-subcontent-permissions-row-00"; 
                                   const alertDv = "#dv-subcontent-permissions-success"; 
                                   let frm = permissions_general.change_form; 
                                        if ( null != frm.alertTimer ) { 
                                        clearTimeout(frm.alertTimer); 
                                        frm.alertTimer = null; 
                                        } 
                                   $( parentDv ).addClass(hddn); 
                                        if (!isActive) { return; } 
                                   $( alertDv ).hide(); 
                                   $( parentDv ).removeClass(hddn); 
                                   $( alertDv ).fadeIn( 600 ); 
                                        frm.alertTimer = setTimeout(() => { 
                                        frm.setAlert(false); }, 15000); 
                                   } 
                              } 
                         } 
                         let permissions_data = { 
                         "group_panel": "#dv-subcontent-permissions", 
                         "change_panel": "#dv-subcontent-password", 
                              "change_form": { 
                              "name": "form-change-password", 
                              "alertTimer" : null, 
                              "button": "#frm-change-password-submit-button", 
                                   "icons": { 
                                   "normal": "#form-change-password-icon", 
                                   "spin": "#form-change-password-icon-spin" 
                                   }, 
                              "error": "#frm-change-password-error-message", 
                                   "setIcon": function( isSpinning ) { 
                                   const dsb = "disabled"; 
                                   const hddn = "d-none"; 
                                   let frm = permissions_data.change_form; 
                                   let icons = [ frm.icons.normal, frm.icons.spin ]; 
                                   var bttn = frm.button; 
                                   let a = isSpinning ? 0 : 1; 
                                   let b = isSpinning ? 1 : 0; 
                                   $( icons[a] ).addClass( hddn ); 
                                   $( icons[b] ).removeClass( hddn ); 
                                        if( isSpinning ) { 
                                        $( bttn ).attr(dsb, dsb); 
                                             } else { 
                                        $( bttn ).removeAttr(dsb); 
                                        } 
                                   }, 
                                   "setStatus": function( message, isActive ) { 
                                   const dsb = "disabled"; 
                                   const hddn = "d-none"; 
                                   const emptymessage = "<!-- Error messages -->" 
                                   var dverr = permissions_data.change_form.error 
                                        if( isActive ) { 
                                        $( dverr ).removeClass(hddn); 
                                        $( dverr ).html(message); 
                                             } else { 
                                        $( dverr ).addClass(hddn); 
                                        $( dverr ).html(emptymessage); 
                                        } 
                                   }, 
                                   "setAlert": function(isActive) { 
                                   const hddn = "d-none"; 
                                   const parentDv = "#dv-subcontent-password-row-00"; 
                                   const alertDv = "#dv-subcontent-password-success"; 
                                   let frm = permissions_data.change_form; 
                                        if ( null != frm.alertTimer ) { 
                                        clearTimeout(frm.alertTimer); 
                                        frm.alertTimer = null; 
                                        } 
                                   $( parentDv ).addClass(hddn); 
                                        if (!isActive) { return; } 
                                   $( alertDv ).hide(); 
                                   $( parentDv ).removeClass(hddn); 
                                   $( alertDv ).fadeIn( 600 ); 
                                        frm.alertTimer = setTimeout(() => { 
                                        frm.setAlert(false); }, 15000); 
                                   } 
                              }, 
                         "cbox": "#cbo-permissions-group", 
                              "password_shown": function() { 
                              let backup = $("#account-user-name").text(); 
                              let currentName = $("#account-password-username").val(); 
                                   if ( null != currentName && currentName.trim().length > 2 ) { return; } 
                              $("#account-password-username").val(backup); 
                              }, 
                              "discounts": function() { 
                              let isContentVisible = $( permissions_data.group_panel ).is(":visible"); 
                              let isComboSelected = $( permissions_data.cbox ).val() == "03"; 
                                   if ( !isContentVisible || !isComboSelected ) { return ""; } 
                              let choices = []; 
                              let state_selector = "#permissions-discounts-states-group input[type='checkbox']"; 
                              let counties_selector = "#permissions-discounts-counties-group input[type='checkbox']"; 
                              let selections = [ state_selector, counties_selector]; 
                                   selections.forEach( s => { 
                                        $( s ).each( function( ) { 
                                        const m = $( this );; 
                                        const arr = m.attr("id").split("-"); 
                                             var obj = { 
                                             "StateName": arr[2], 
                                             "IsSelected": m.is(":checked"), 
                                             "CountyName": "" 
                                             }; 
                                             if( arr.length > 3 ) { obj["CountyName"] = arr[3]; } 
                                        choices.push(obj); 
                                        }); 
                                   }); 
                              return JSON.stringify(choices); 
                              }, 
                              "subscriptions": function() { 
                              let isContentVisible = $( permissions_data.group_panel ).is(":visible"); 
                              let isComboSelected = $( permissions_data.cbox ).val() == "02"; 
                                   if ( !isContentVisible || !isComboSelected ) { return ""; } 
                              const grp = "guest"; 
                              let group_selector = "#permissions-subscription-group input[type='radio']:checked"; 
                              let selection = $(group_selector).attr('value').toLowerCase(); 
                                   if( !(selection) ) { selection = grp; } 
                                   return JSON.stringify( { "Level": selection } ); 
                              }, 
                              "changerequest": function() { 
                              let isContentVisible = $( permissions_data.change_panel ).is(":visible"); 
                              let isContentValid = $( "#" + permissions_data.change_form.name ).valid(); 
                                   if ( !isContentVisible || !isContentValid ) { return ""; } 
                                   let pword = { 
                                   "userName": $("#account-password-username").val(), 
                                   "oldPassword": $("#account-password-old-password").val(), 
                                   "newPassword": $("#account-password-new-password").val(), 
                                   "confirmPassword": $("#account-password-confirmation").val() 
                                   }; 
                              return JSON.stringify( pword ); 
                              }, 
                              "submission": function() { 
                              const frmname = "permissions-subscription-group"; 
                              const jsobj = window.jsHandler; 
                                   let dta = { 
                                   "subscription": permissions_data.subscriptions(), 
                                   "discounts": permissions_data.discounts(), 
                                   "changes": permissions_data.changerequest() 
                                   } 
                              if ( dta.subscription.length == 0 && dta.discounts.length == 0 && dta.changes.length == 0 ) return false; 
                              const isChangePassword = dta.changes.length > 0; 
                              const targetScreen = isChangePassword ? permissions_data.change_form : permissions_general.change_form; 
                              targetScreen.setIcon( false ); 
                              targetScreen.setAlert( false ); 
                              targetScreen.setStatus( '', false ); 
                              if ( undefined === jsobj || null === jsobj ) return true; 
                                   try { 
                                   const submitmessage = "<span class='text-warning'>Submitting form values ...</span>"; 
                                   targetScreen.setStatus( submitmessage, true ); 
                                   targetScreen.setIcon( true ); 
                                   let js = JSON.stringify( dta ); 
                                   jsobj.submit(frmname, js); 
                                   targetScreen.setStatus( '', false ); 
                                   targetScreen.setAlert( true ); 
                                        } catch (err) { 
                                   targetScreen.setStatus( err, true ); 
                                        } finally { 
                                   targetScreen.setIcon( false ); 
                                   } 
                              return false; 
                              } 
                         }; 
                         function changePasswordSubmitButtonClicked() { 
                         permissions_data.submission(); 
                         } 
                         function changePermissionsButtonClicked() { 
                         permissions_data.submission(); 
                         } 
                    let profileAlertTimer = null; 
                    let profileNames = [ "frm-profile-address", "frm-profile-personal", "frm-profile-phone", "frm-profile-email" ]; 
                    let profileButtonName = "frm-profile-submit-button"; 
                    let profileStatusDiv = "frm-profile-error-message"; 
                         var profileicons = { 
                         spin: "#form-profile-icon-spin", 
                         normal: "#form-profile-icon" 
                         } 
                         function setSuccessAlert( isActive ) { 
                         const hddn = "d-none"; 
                         const parentDv = "#dv-subcontent-profile-row-00"; 
                         const alertDv = "#dv-subcontent-profile-success"; 
                              if ( null != profileAlertTimer ) { 
                              clearTimeout(profileAlertTimer); 
                              profileAlertTimer = null; 
                              } 
                         $( parentDv ).addClass(hddn); 
                              if (!isActive) { return; } 
                         $( alertDv ).hide(); 
                         $( parentDv ).removeClass(hddn); 
                         $( alertDv ).fadeIn( 600 ); 
                              profileAlertTimer = setTimeout(() => { setSuccessAlert(false); }, 15000); 
                         } 
                         function setProfileStatusMessage( message, isActive ) { 
                         const dsb = "disabled"; 
                         const hddn = "d-none"; 
                         const emptymessage = "<!-- Error messages -->" 
                         const pound = "#"; 
                         var dverr = pound + profileStatusDiv 
                              if( isActive ) { 
                              $( dverr ).removeClass(hddn); 
                              $( dverr ).html(message); 
                                   } else { 
                              $( dverr ).addClass(hddn); 
                              $( dverr ).html(emptymessage); 
                              } 
                         } 
                         function setProfileIconState( isSpinning ) { 
                         const dsb = "disabled"; 
                         const hddn = "d-none"; 
                         const pound = "#"; 
                         let icons = []; 
                         var bttn = pound + profileButtonName; 
                         icons.push(profileicons.normal); 
                         icons.push(profileicons.spin); 
                         let a = isSpinning ? 0 : 1; 
                         let b = isSpinning ? 1 : 0; 
                         $( icons[a] ).addClass( hddn ); 
                         $( icons[b] ).removeClass( hddn ); 
                              if( isSpinning ) { 
                              $( bttn ).attr(dsb, dsb); 
                                   } else { 
                              $( bttn ).removeAttr(dsb); 
                              } 
                         } 
                         function profileActionCompleted() { 
                         setProfileIconState( false ); 
                         setProfileStatusMessage( '', false ); 
                         setSuccessAlert( true ); 
                         } 
                         function isValidProfileEmail( email ) { 
                              if( undefined === email || null === email || email.length === 0) { return true; } 
                              const res = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; 
                         return res.test(email.toLowerCase()); 
                         } 
                         function isValidProfilePhone( phonenumber ) { 
                              if( undefined === phonenumber || null === phonenumber || phonenumber.length === 0) { return true; } 
                              var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/; 
                              var phoneexp = /^[\s()+-]*([0-9][\s()+-]*){6,20}$/; 
                         var expressions = [ phoneno, phoneexp ]; 
                              for( var t = 0; t < expressions.length; t++ ) { 
                              var rg = expressions[t]; 
                              var isOk = rg.test(phonenumber); 
                              if(isOk) return true; 
                              } 
                         return false; 
                         } 
                         function isValidProfileAddress( address ) { 
                              if ( undefined === address || null === address || address.length === 0) { return true; } 
                         address = address.trim(); 
                         if ( address.length < 9 ) return false; 
                         const space = ' '; 
                         const comma = ','; 
                         if ( address.indexOf(space) < 0 ) return false; 
                         if ( address.indexOf(comma) < 0 ) return false; 
                         let parts = address.split(space); 
                         let zip = parts[parts.length - 1]; 
                         if(!isZip(zip)) return false; 
                         return true; 
                         } 
                         function isZip( zip ) { 
                              if ( undefined === zip || null === zip || zip.length === 0) { return false; } 
                              var zp = /(^\d{5}$)|(^\d{5}-\d{4}$)/; 
                         return zp.test(zip); 
                         } 
                         function initializeProfileValidator() { 
                         /* 
                         * NOTE: There are multiple forms on this page 
                         * initialization of the jquery validators needs to be consolidated 
                         * to include both profile and permissions forms 
                         */ 
                              jQuery.validator.setDefaults({ 
                              debug: true, 
                              success: "valid" 
                              }); 
                              jQuery.validator.addMethod("isValidProfileEmail", function (value, element, params) { 
                                   if (!value) { return true; } 
                                   if (value == null) { return true; } 
                                   if (value.length == 0) { return true; } 
                              return isValidProfileEmail(String(value)); 
                              }, 'Must be a valid email address.'); 
                              jQuery.validator.addMethod("isValidProfilePhone", function (value, element, params) { 
                                   if (!value) { return true; } 
                                   if (value == null) { return true; } 
                                   if (value.length == 0) { return true; } 
                              return isValidProfilePhone(String(value)); 
                              }, 'Must be a valid phone number.'); 
                              jQuery.validator.addMethod("isValidProfileAddress", function (value, element, params) { 
                                   if (!value) { return true; } 
                                   if (value == null) { return true; } 
                                   if (value.length == 0) { return true; } 
                              return isValidProfileAddress(String(value)); 
                              }, 'Must be a valid address.'); 
                              jQuery.validator.addMethod("isPassword", function (value, element, params) { 
                                   if (!value) { return false; } 
                                   if (value == null) { return false; } 
                                   if (value.length == 0) { return false; } 
                                   const res = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,255}$/im; 
                              return res.test(String(value)); 
                              }, 'Password must meet minimum requirement.'); 
                         } 
                    function initializeProfileFormValidation() 
                         { 
                         let form_names = []; 
                         profileNames.forEach(p => form_names.push(p)); 
                         form_names.push('form-change-password'); 
                              for(var i = 0; i < form_names.length; i++) { 
                              var frm = document.getElementById(form_names[i]); 
                              var formJq = "#" + form_names[i]; 
                                   switch (i) { 
                                   case 0: // address 
                                        $(formJq).validate({ 
                                             rules: { 
                                                  "billing-address": { 
                                                  maxlength: 750, 
                                                  isValidProfileAddress: true 
                                                  }, 
                                                  "mailing-address": { 
                                                  maxlength: 750, 
                                                  isValidProfileAddress: true 
                                                  } 
                                             } 
                                        }); 
                                   break; 
                                   case 1: // personal 
                                        $(formJq).validate({ 
                                             rules: { 
                                                  "first-name": { 
                                                  required: false, 
                                                  minlength: 1, 
                                                  maxlength: 75 
                                                  }, 
                                                  "last-name": { 
                                                  required: false, 
                                                  minlength: 1, 
                                                  maxlength: 125 
                                                  }, 
                                                  "company-name": { 
                                                  required: false, 
                                                  minlength: 2, 
                                                  maxlength: 150 
                                                  } 
                                             } 
                                        }); 
                                   break; 
                                   case 2: // phone 
                                        $(formJq).validate({ 
                                             rules: { 
                                                  "phone-number": { 
                                                  required: false, 
                                                  minlength: 7, 
                                                  maxlength: 30, 
                                                  isValidProfilePhone: true 
                                                  } 
                                             } 
                                        }); 
                                   break; 
                                   case 3: // email 
                                        $(formJq).validate({ 
                                             rules: { 
                                                  "email-address": { 
                                                  required: false, 
                                                  minlength: 4, 
                                                  maxlength: 255, 
                                                  isValidProfileEmail: true 
                                                  } 
                                             } 
                                        }); 
                                   break; 
                                   case 4: // change-password 
                                        $(formJq).validate({ 
                                             rules: { 
                                                  "account-password": { 
                                                  required: true, 
                                                  minlength: 8, 
                                                  maxlength: 255, 
                                                  isPassword: true 
                                                  }, 
                                                  "account-password-confirmation": { 
                                                  minlength: 8, 
                                                  maxlength: 255, 
                                                  equalTo: "#account-password-new-password" 
                                                  } 
                                             } 
                                        }); 
                                   break; 
                                   } 
                              } 
                         } 
                         function profileSubmitButtonClicked() { 
                         const cboxid = "#cbo-profile-group"; 
                         const find = "~0"; 
                         const frmprefix = "frm-profile-~0"; 
                         const suffixes = [ "personal", "address", "phone", "email" ]; 
                         setSuccessAlert( false ); 
                         setProfileIconState( false ); 
                         setProfileStatusMessage( '', false ); 
                         var current = $(cboxid).val(); 
                              if (null === current || current.length === 0 || suffixes.indexOf(current) < 0) { 
                              return false; 
                              } 
                         let target = frmprefix.replace(find, current); 
                              if (document.getElementById(target) == null) { return; } 
                         let jqobj = "#" + target; 
                              if( $( jqobj ).valid() == false ) { 
                              setProfileStatusMessage( 'Please review submission, you have one or more invalid values.', true ); 
                              return false; 
                              } 
                         let payload = ""; 
                              switch(current) { 
                              case "personal" : 
                              const personal = [ 
                                   { NameType: "First", Name: $("#tbx-profile-first-name").val() }, 
                                   { NameType: "Last", Name: $("#tbx-profile-last-name").val() }, 
                                   { NameType: "Company", Name: $("#tbx-profile-company").val() } 
                              ]; 
                              payload = JSON.stringify( personal ); 
                              break; 
                              case "address" : 
                              const address = [ 
                                   { AddressType: "Mailing", Address: $("#tbx-profile-mailing-address").val() }, 
                                   { AddressType: "Billing", Address: $("#tbx-profile-billing-address").val() } 
                              ]; 
                              payload = JSON.stringify( address ); 
                              break; 
                              case "phone" : 
                              const phone = [ 
                                   { PhoneType: "Personal", Phone: $("#tbx-profile-phone-01").val() }, 
                                   { PhoneType: "Business", Phone: $("#tbx-profile-phone-02").val() }, 
                                   { PhoneType: "Other", Phone: $("#tbx-profile-phone-03").val() }, 
                              ]; 
                              payload = JSON.stringify( phone ); 
                              break; 
                              case "email" : 
                              const email = [ 
                                   { EmailType: "Personal", Email: $("#tbx-profile-email-01").val() }, 
                                   { EmailType: "Business", Email: $("#tbx-profile-email-02").val() }, 
                                   { EmailType: "Other", Email: $("#tbx-profile-email-03").val() }, 
                              ]; 
                              payload = JSON.stringify( email ); 
                              break; 
                              } 
                              if ( null === payload || payload.length == 0 ) { 
                              setProfileStatusMessage( 'Error: Unable to capture form submission values', true ); 
                              return false; 
                              } 
                         let handler = window.jsHandler; 
                              if( undefined === handler || null === handler || !(handler) ) { 
                              setProfileStatusMessage( 'Error: Unable to bind form submission handler', true ); 
                              return true; 
                              } 
                              try { 
                              setProfileIconState( true ); 
                              setProfileStatusMessage( "<span class='text-warning'>Submitting form values ...</span>", true ); 
                              handler.submit(target, payload); 
                              return false; 
                              } 
                              catch (err) { 
                              setProfileStatusMessage( err, true ); 
                                   } finally { 
                              setProfileIconState( false ); 
                              } 
                         } 
                         function permissionsComboBoxChanged() { 
                         const tilde = "~0"; 
                         const permissionsCombo = "#cbo-permissions-group"; 
                         const permissionsAreaName = "#dv-subcontent-permissions-row-~0"; 
                         const permissionsAreas = [ 
                         permissionsAreaName.replace(tilde, "02"), 
                         permissionsAreaName.replace(tilde, "03") 
                         ]; 
                              permissionsAreas.forEach(p => { $( p ).hide(); }); 
                         let item = $( permissionsCombo ).val(); 
                         let itemName = permissionsAreaName.replace(tilde, item); 
                         $( itemName ).fadeIn( 600 ); 
                         subscriptionLevelChanged(); 
                         } 
                         function subscriptionLevelChanged() { 
                         const paragraphName = "#subscription-description-~0" 
                         var dvDescription = "#dv-permissions-subscription-description"; 
                         var selection = $("input[name='subscription-group']:checked").val(); 
                              if ( undefined === selection || null === selection || selection.length == 0 ) { 
                              selection = "Guest"; 
                              } 
                         $( dvDescription ).find("p").hide(); 
                         $( dvDescription ).find("p").removeClass("d-none"); 
                         const paragraph = paragraphName.replace( "~0", selection.toLowerCase() ); 
                         $( paragraph ).fadeIn( 200 ); 
                         } 
                    initializeProfileValidator(); 
                    initializeProfileFormValidation(); 
                    permissionsComboBoxChanged(); 


		</script>
		<script name="re-authenticate-js">
                         if (typeof isValidEmail != 'function') { 
                              window.isValidEmail = function(email){ 
                                   const res = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; 
                              return res.test(email.toLowerCase());}; 
                         } 
                    let authformvalidators = [ 
                         { 
                         "name": "isEmailOrUser", 
                              "action": function (value, element, params) { 
                                   if (!value) { return false; } 
                                   if (value == null) { return false; } 
                                   if (value.length == 0) { return false; } 
                                   if (isValidEmail(String(value))) { return true; } 
                                   if (value.indexOf("@") >= 0) { return false; } 
                              return true; 
                              }, 
                         "message": "Must be a valid user name." 
                         }, 
                         { 
                         "name": "isEmail", 
                              "action": function (value, element, params) { 
                                   if (!value) { return false; } 
                                   if (value == null) { return false; } 
                                   if (value.length == 0) { return false; } 
                              return isValidEmail(String(value)); 
                              }, 
                         "message": "Must be a valid email address." 
                         }, 
                         { 
                         "name": "isPassword", 
                              "action": function (value, element, params) { 
                                   if (!value) { return false; } 
                                   if (value == null) { return false; } 
                                   if (value.length == 0) { return false; } 
                                   const res = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,255}$/im; 
                              return res.test(String(value)); 
                              }, 
                         "message": "Password must meet minimum requirement." 
                         } 
                    ]; 
                         let jsreauthenticate = { 
                         "name": "form-re-authorize", 
                         "jqid": "#form-re-authorize", 
                         "bttn": "#form-re-authorize-submit", 
                              "init": function() { 
                              var formJq = jsreauthenticate.jqid; 
                              var buttonJq = jsreauthenticate.bttn; 
                              var submitaction = "jsreauthenticate.authenticate( 'user', 're-authorize')"; 
                              $(buttonJq).attr("onclick", submitaction); 
                                   $(formJq).validate({ 
                                        rules: { 
                                             "username": { 
                                             required: true, 
                                             minlength: 8, 
                                             maxlength: 255, 
                                             isEmailOrUser: true 
                                             }, 
                                             "login-password": { 
                                             required: true, 
                                             minlength: 8, 
                                             maxlength: 255, 
                                             isPassword: true 
                                             } 
                                        } 
                                   }); 
                              }, 
                              "authenticate": async function(usr, process) { 
                                   if ( usr != 'user' || process != 're-authorize') { return; } 
                              let handler = window.jsHandler; 
                                   if ( undefined === handler || null === handler || !(handler) ) { return; } 
                              let isformvalid = jsreauthenticate.isvalid(); 
                                   if (!isformvalid) { return; } 
                              let payload = jsreauthenticate.serialize(); 
                              await handler.reauthenticate(payload); 
                              }, 
                              "show": function() { 
                              const btn = "#btn-account-authorize-show"; 
                              $( btn ).click(); 
                              }, 
                              "update_session": function() { 
                              let handler = window.jsHandler; 
                                   if ( undefined === handler || null === handler || !(handler) ) { return; } 
                              handler.checkSession(); 
                              }, 
                              "isvalid": function(){ 
                              var formJq = jsreauthenticate.jqid; 
                              $(formJq).validate(); 
                              return $(formJq).valid(); 
                              }, 
                              "serialize": function(){ 
                              const usr = "#form-re-authorize-username"; 
                              const pwd = "#form-re-authorize-password"; 
                                   let js = { 
                                   "username": $( usr ).val(), 
                                   "login-password": $( pwd ).val(); 
                                   }; 
                              return JSON.stringify( js ); 
                              } 
                         }; 
                         authformvalidators.forEach(v => { 
                         if ( $.validator.methods[v.name] == null ) 
                              { 
                              $.validator.addMethod(v.name, v.action, v.message); 
                              } 
                         }); 
                    jsreauthenticate.init(); 
                         var jsReauthorizeInterval = setInterval(() => { jsreauthenticate.update_session();}, 15000); 


		</script>
		<script>
                    let clientScriptActivated = true; 
                         function commonClientScript() { 
                              try { 
                                   if ( typeof setDisplay == 'function' ) { setDisplay( 'permissions' );} 
                                   } catch(err) { 
                              console.debug(err); 
                              } 
                         } 
                         if (clientScriptActivated) { 
                              setTimeout( () => { commonClientScript(); }, 250); 
                         } 


		</script>
		<script name="verify-and-post">
                         function verifyAndPost(pagename, buttonname) { 
                         const domain = "http://internal.legalead.com/" 
                         const target = "".concat(pagename, "/", buttonname); 
                         const keyname = "".concat(pagename, "-", buttonname); 
                         const destination = "".concat(domain, target); 
                         const nonauthorization = [ "user", "home" ]; 
                              if ( pagename == 'user' && buttonname == 'logout' ) { 
                              let handler = window.jsHandler; 
                                   if( undefined === handler || null === handler || !(handler) ) { 
                                   return; 
                                   } 
                              handler.logoutUser(); 
                              return; 
                              } 
                              if (buttonname.indexOf('logout') >= 0) { 
                              window.location.href = destination; 
                              return; 
                              } 
                         let isvalid = true; 
                              let prms = { 
                              "formname" : null, 
                              "formid" : null, 
                              "frm": null 
                              }; 
                              if(nonauthorization.find(x => x == pagename) == null) { 
                              let sts = document.getElementById('spn-user-session-status'); 
                              let attrSts = sts == null ? null : sts.getAttribute('value'); 
                                   if (null !== attrSts && attrSts.indexOf('-') >= 0) { 
                                   document.getElementById('btn-account-authorize-show').click(); 
                                   return; 
                                   } 
                              } 
                              switch (keyname) { 
                              case "home-form-login-submit": 
                              prms.formname = formNames[0]; 
                              prms.formid = "#" + prms.formname; 
                              prms.frm = $(prms.formid); 
                              prms.frm.validate(); 
                              isvalid = prms.frm.valid(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "home-form-register-submit": 
                              prms.formname = formNames[1]; 
                              prms.formid = "#" + prms.formname; 
                              prms.frm = $(prms.formid); 
                              prms.frm.validate(); 
                              isvalid = prms.frm.valid(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "user-re-authorize": 
                              isvalid = jsreauthorize.isvalid(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "myaccount-frm-change-password-submit-button": 
                              prms.formname = "form-change-password"; 
                              prms.formid = "#" + prms.formname; 
                              prms.frm = $(prms.formid); 
                              prms.frm.validate(); 
                              isvalid = prms.frm.valid(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "myaccount-frm-permissions-submit-button": 
                              isvalid = permissions_data.submission(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "myaccount-frm-profile-submit-button": 
                              isvalid = profileSubmitButtonClicked(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              case "mysearch-search-submit-button": 
                              isvalid = jsSearchForm.validate(); 
                                   if( !isvalid ) { return; } 
                              break; 
                              } 
                              if (isvalid) { 
                              window.location.href = destination; 
                              } 
                         } 


		</script>
	
</body></html>